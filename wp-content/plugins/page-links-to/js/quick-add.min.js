(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
'use strict';

// Copy to clipboard.
jQuery(function ($) {
	var $clipboardLinks = $('.plt-copy-short-url');
	if (ClipboardJS.isSupported()) {
		$clipboardLinks.click(function (e) {
			return e.preventDefault();
		});
	} else {
		$clipboardLinks.hide();
	}

	$('.plt-links-to button').click(function (e) {
		$('#cws-links-to').focus();
	});

	var clipboard = new ClipboardJS('.plt-copy-short-url');
	var copied = pltVars.copied;
	var browserNoSupportCopying = pltVars.browserNoSupportCopying;

	clipboard.on('success', function (e) {
		var $trigger = $(e.trigger);

		$trigger.text(copied);
		setTimeout(function () {
			return $trigger.text($trigger.data('original-text'));
		}, 4000);
	});

	clipboard.on('error', function (e) {
		var $trigger = $(e.trigger);

		$trigger.text(browserNoSupportCopying);
		setTimeout(function () {
			return $clipboardLinks.hide();
		}, 4000);
	});
});

// Quick Add.
jQuery(function ($) {
	var $modal = $('#plt-quick-add');
	var $form = $modal.find('form:first');
	var $saveDraft = $('#plt-quick-add-save');
	var $publish = $('#plt-quick-add-publish');
	var $menuItem = $('a[href$="post_type=page&page=plt-add-page-link"], a[href$="#new-page-link"]');
	var $messages = $modal.find('.messages');
	var $shortUrlMessage = $modal.find('.short-url-message');
	var $title = $modal.find('[name="title"]');
	var $url = $modal.find('[name="url"]');
	var $slug = $modal.find('[name="slug"]');
	var nonce = $modal.find('[name="plt_nonce"]').val();
	var defaultSlugPlaceholder = $slug.prop('placeholder');
	var fancyUrls = window.pltVars.fancyUrls;
	var yes = true,
	    no = false;


	var modalAction = function modalAction(action) {
		return function () {
			return $modal.dialog(action);
		};
	};
	var isOpen = modalAction('isOpen');
	var open = modalAction('open');
	var close = modalAction('close');

	var makeSlugFromTitle = function makeSlugFromTitle() {
		var title = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';

		return title.toLowerCase().replace(/\s+/g, '-').replace(/-{2,}/g, '-').replace(/[^a-z0-9-]/, '').replace(/-$/, '').replace(/^-/, '');
	};

	var makeSlugFromSlug = function makeSlugFromSlug() {
		var slug = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';

		return slug.toLowerCase().replace(/\s+/g, '-').replace(/-{2,}/g, '-').replace(/[^a-z0-9-]/, '').replace(/^-/, '');
	};

	var addMessage = function addMessage(message) {
		var $newMessage = $('<p>' + message + '</p>');
		$messages.append($newMessage);
		return $newMessage;
	};

	var addExpiringMessage = function addExpiringMessage(message, duration) {
		var $newMessage = addMessage(message);
		setTimeout(function () {
			return $newMessage.fadeOut();
		}, duration);
		return $newMessage;
	};

	var displayShortUrlMessage = function displayShortUrlMessage(show) {
		return $shortUrlMessage.toggle(show);
	};

	var updateSlug = function updateSlug() {
		var placeholderSlug = makeSlugFromTitle($title.val());
		var slug = makeSlugFromSlug($slug.val());

		$slug.prop('placeholder', placeholderSlug.length ? placeholderSlug : defaultSlugPlaceholder);
		$slug.val(slug);
	};

	var noDefaultEvent = function noDefaultEvent(func) {
		return function (e) {
			e.preventDefault();
			func();
		};
	};

	var hardUpdateSlug = noDefaultEvent(function () {
		return $slug.val(makeSlugFromTitle($slug.val()));
	});

	var handleShowSlugMessage = noDefaultEvent(function () {
		return displayShortUrlMessage($slug.prop('placeholder').length > 16 && !$slug.val().length);
	});

	var reset = function reset() {
		$title.val('');
		$url.val('');
		$slug.val('');
		$slug.prop('placeholder', defaultSlugPlaceholder);
		maybeUpdateButtons();
	};

	var updateButtons = function updateButtons() {
		var enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : yes;

		$publish.prop('disabled', !enabled);
		$saveDraft.prop('disabled', !enabled);
	};

	var maybeUpdateButtons = function maybeUpdateButtons() {
		return updateButtons($title.val().length && $url.val().length);
	};

	var submit = function submit() {
		var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
		    _ref$publish = _ref.publish,
		    publish = _ref$publish === undefined ? yes : _ref$publish;

		var title = $title.val();
		var url = $url.val();
		var slug = $slug.val() ? $slug.val() : makeSlugFromTitle(title);

		$.post(ajaxurl, {
			action: 'plt_quick_add',
			plt_title: title,
			plt_url: url,
			plt_slug: slug,
			plt_publish: publish ? 1 : 0,
			plt_nonce: nonce
		}, function (response) {
			var message = response.data.message;

			var delay = 5000;
			reset();
			$title.focus();
			addExpiringMessage(message, delay);
		});
	};

	var clickMenuItem = noDefaultEvent(function () {
		return isOpen() ? close() : open();
	});
	var saveDraft = noDefaultEvent(function () {
		return submit({ publish: no });
	});
	var publish = noDefaultEvent(function () {
		return submit({ publish: yes });
	});

	$modal.dialog({
		title: 'Add Page Link',
		dialogClass: 'wp-dialog plt-ui-dialog',
		autoOpen: no,
		draggable: no,
		width: 'auto',
		modal: yes,
		resizable: no,
		closeOnEscape: yes,
		position: {
			my: 'center',
			at: 'center',
			of: window
		},
		open: function open() {
			return $('.ui-widget-overlay').bind('click', close);
		},
		create: function create() {
			$('.plt-ui-dialog .ui-dialog-titlebar-close').addClass('ui-button');
			$('.plt-ui-dialog').css({ position: 'fixed' });
		}
	});

	var repositionModal = function repositionModal() {
		if (!isOpen()) {
			return;
		}

		$modal.dialog('option', 'position', {
			my: 'center',
			at: 'center',
			of: window
		});
	};

	$(window).scroll(repositionModal).resize(repositionModal);

	// Events.
	if (fancyUrls) {
		$title.keyup(updateSlug);
		$title.keyup(handleShowSlugMessage);
		$slug.keyup(updateSlug);
		$slug.keyup(handleShowSlugMessage);
		$form.change(hardUpdateSlug);
	}

	$menuItem.click(clickMenuItem);
	$saveDraft.click(saveDraft);
	$publish.click(publish);
	$form.submit(publish);
	$title.keyup(maybeUpdateButtons);
	$url.keyup(maybeUpdateButtons);
	$form.change(maybeUpdateButtons);

	// Init.
	reset();
});

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9xdWljay1hZGQuanN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQTtBQUNBLE9BQU8sYUFBSztBQUNYLEtBQU0sa0JBQWtCLEVBQUUscUJBQUYsQ0FBeEI7QUFDQSxLQUFJLFlBQVksV0FBWixFQUFKLEVBQStCO0FBQzlCLGtCQUFnQixLQUFoQixDQUFzQjtBQUFBLFVBQUssRUFBRSxjQUFGLEVBQUw7QUFBQSxHQUF0QjtBQUNBLEVBRkQsTUFFTztBQUNOLGtCQUFnQixJQUFoQjtBQUNBOztBQUVELEdBQUUsc0JBQUYsRUFBMEIsS0FBMUIsQ0FBZ0MsYUFBSztBQUNwQyxJQUFFLGVBQUYsRUFBbUIsS0FBbkI7QUFDQSxFQUZEOztBQUlBLEtBQU0sWUFBWSxJQUFJLFdBQUosQ0FBZ0IscUJBQWhCLENBQWxCO0FBQ0EsS0FBTSxTQUFTLFFBQVEsTUFBdkI7QUFDQSxLQUFNLDBCQUEwQixRQUFRLHVCQUF4Qzs7QUFFQSxXQUFVLEVBQVYsQ0FBYSxTQUFiLEVBQXdCLGFBQUs7QUFDNUIsTUFBTSxXQUFXLEVBQUUsRUFBRSxPQUFKLENBQWpCOztBQUVBLFdBQVMsSUFBVCxDQUFjLE1BQWQ7QUFDQSxhQUFXO0FBQUEsVUFBTSxTQUFTLElBQVQsQ0FBYyxTQUFTLElBQVQsQ0FBYyxlQUFkLENBQWQsQ0FBTjtBQUFBLEdBQVgsRUFBZ0UsSUFBaEU7QUFDQSxFQUxEOztBQU9BLFdBQVUsRUFBVixDQUFhLE9BQWIsRUFBc0IsYUFBSztBQUMxQixNQUFNLFdBQVcsRUFBRSxFQUFFLE9BQUosQ0FBakI7O0FBRUEsV0FBUyxJQUFULENBQWMsdUJBQWQ7QUFDQSxhQUFXO0FBQUEsVUFBTSxnQkFBZ0IsSUFBaEIsRUFBTjtBQUFBLEdBQVgsRUFBeUMsSUFBekM7QUFDQSxFQUxEO0FBTUEsQ0E3QkQ7O0FBK0JBO0FBQ0EsT0FBTyxhQUFLO0FBQ1gsS0FBTSxTQUFTLEVBQUUsZ0JB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MENBQUYsRUFBOEMsUUFBOUMsQ0FBdUQsV0FBdkQ7QUFDQSxLQUFFLGdCQUFGLEVBQW9CLEdBQXBCLENBQXdCLEVBQUUsVUFBVSxPQUFaLEVBQXhCO0FBQ0E7QUFsQlksRUFBZDs7QUFxQkEsS0FBTSxrQkFBa0IsU0FBbEIsZUFBa0IsR0FBTTtBQUM3QixNQUFJLENBQUMsUUFBTCxFQUFlO0FBQ2Q7QUFDQTs7QUFFRCxTQUFPLE1BQVAsQ0FBYyxRQUFkLEVBQXdCLFVBQXhCLEVBQW9DO0FBQ25DLE9BQUksUUFEK0I7QUFFbkMsT0FBSSxRQUYrQjtBQUduQyxPQUFJO0FBSCtCLEdBQXBDO0FBS0EsRUFWRDs7QUFZQSxHQUFFLE1BQUYsRUFDRSxNQURGLENBQ1MsZUFEVCxFQUVFLE1BRkYsQ0FFUyxlQUZUOztBQUlBO0FBQ0EsS0FBSSxTQUFKLEVBQWU7QUFDZCxTQUFPLEtBQVAsQ0FBYSxVQUFiO0FBQ0EsU0FBTyxLQUFQLENBQWEscUJBQWI7QUFDQSxRQUFNLEtBQU4sQ0FBWSxVQUFaO0FBQ0EsUUFBTSxLQUFOLENBQVkscUJBQVo7QUFDQSxRQUFNLE1BQU4sQ0FBYSxjQUFiO0FBQ0E7O0FBRUQsV0FBVSxLQUFWLENBQWdCLGFBQWhCO0FBQ0EsWUFBVyxLQUFYLENBQWlCLFNBQWpCO0FBQ0EsVUFBUyxLQUFULENBQWUsT0FBZjtBQUNBLE9BQU0sTUFBTixDQUFhLE9BQWI7QUFDQSxRQUFPLEtBQVAsQ0FBYSxrQkFBYjtBQUNBLE1BQUssS0FBTCxDQUFXLGtCQUFYO0FBQ0EsT0FBTSxNQUFOLENBQWEsa0JBQWI7O0FBRUE7QUFDQTtBQUNBLENBdkxEIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLy8gQ29weSB0byBjbGlwYm9hcmQuXG5qUXVlcnkoJCA9PiB7XG5cdGNvbnN0ICRjbGlwYm9hcmRMaW5rcyA9ICQoJy5wbHQtY29weS1zaG9ydC11cmwnKTtcblx0aWYgKENsaXBib2FyZEpTLmlzU3VwcG9ydGVkKCkpIHtcblx0XHQkY2xpcGJvYXJkTGlua3MuY2xpY2soZSA9PiBlLnByZXZlbnREZWZhdWx0KCkpO1xuXHR9IGVsc2Uge1xuXHRcdCRjbGlwYm9hcmRMaW5rcy5oaWRlKCk7XG5cdH1cblxuXHQkKCcucGx0LWxpbmtzLXRvIGJ1dHRvbicpLmNsaWNrKGUgPT4ge1xuXHRcdCQoJyNjd3MtbGlua3MtdG8nKS5mb2N1cygpO1xuXHR9KTtcblxuXHRjb25zdCBjbGlwYm9hcmQgPSBuZXcgQ2xpcGJvYXJkSlMoJy5wbHQtY29weS1zaG9ydC11cmwnKTtcblx0Y29uc3QgY29waWVkID0gcGx0VmFycy5jb3BpZWQ7XG5cdGNvbnN0IGJyb3dzZXJOb1N1cHBvcnRDb3B5aW5nID0gcGx0VmFycy5icm93c2VyTm9TdXBwb3J0Q29weWluZztcblxuXHRjbGlwYm9hcmQub24oJ3N1Y2Nlc3MnLCBlID0+IHtcblx0XHRjb25zdCAkdHJpZ2dlciA9ICQoZS50cmlnZ2VyKTtcblxuXHRcdCR0cmlnZ2VyLnRleHQoY29waWVkKTtcblx0XHRzZXRUaW1lb3V0KCgpID0+ICR0cmlnZ2VyLnRleHQoJHRyaWdnZXIuZGF0YSgnb3JpZ2luYWwtdGV4dCcpKSwgNDAwMCk7XG5cdH0pO1xuXG5cdGNsaXBib2FyZC5vbignZXJyb3InLCBlID0+IHtcblx0XHRjb25zdCAkdHJpZ2dlciA9ICQoZS50cmlnZ2VyKTtcblxuXHRcdCR0cmlnZ2VyLnRleHQoYnJvd3Nlck5vU3VwcG9ydENvcHlpbmcpO1xuXHRcdHNldFRpbWVvdXQoKCkgPT4gJGNsaXBib2FyZExpbmtzLmhpZGUoKSwgNDAwMCk7XG5cdH0pO1xufSk7XG5cbi8vIFF1aWNrIEFkZC5cbmpRdWVyeSgkID0+IHtcblx0Y29uc3QgJG1vZGFsID0gJCgnI3BsdC1xdWljay1hZGQnKTtcblx0Y29uc3QgJGZvcm0gPSAkbW9kYWwuZmluZCgnZm9ybTpmaXJzdCcpO1xuXHRjb25zdCAkc2F2ZURyYWZ0ID0gJCgnI3BsdC1xdWljay1hZGQtc2F2ZScpO1xuXHRjb25zdCAkcHVibGlzaCA9ICQoJyNwbHQtcXVpY2stYWRkLXB1Ymxpc2gnKTtcblx0Y29uc3QgJG1lbnVJdGVtID0gJChcblx0XHQnYVtocmVmJD1cInBvc3RfdHlwZT1wYWdlJnBhZ2U9cGx0LWFkZC1wYWdlLWxpbmtcIl0sIGFbaHJlZiQ9XCIjbmV3LXBhZ2UtbGlua1wiXSdcblx0KTtcblx0Y29uc3QgJG1lc3NhZ2VzID0gJG1vZGFsLmZpbmQoJy5tZXNzYWdlcycpO1xuXHRjb25zdCAkc2hvcnRVcmxNZXNzYWdlID0gJG1vZGFsLmZpbmQoJy5zaG9ydC11cmwtbWVzc2FnZScpO1xuXHRjb25zdCAkdGl0bGUgPSAkbW9kYWwuZmluZCgnW25hbWU9XCJ0aXRsZVwiXScpO1xuXHRjb25zdCAkdXJsID0gJG1vZGFsLmZpbmQoJ1tuYW1lPVwidXJsXCJdJyk7XG5cdGNvbnN0ICRzbHVnID0gJG1vZGFsLmZpbmQoJ1tuYW1lPVwic2x1Z1wiXScpO1xuXHRjb25zdCBub25jZSA9ICRtb2RhbC5maW5kKCdbbmFtZT1cInBsdF9ub25jZVwiXScpLnZhbCgpO1xuXHRjb25zdCBkZWZhdWx0U2x1Z1BsYWNlaG9sZGVyID0gJHNsdWcucHJvcCgncGxhY2Vob2xkZXInKTtcblx0Y29uc3QgZmFuY3lVcmxzID0gd2luZG93LnBsdFZhcnMuZmFuY3lVcmxzO1xuXHRjb25zdCBbeWVzLCBub10gPSBbdHJ1ZSwgZmFsc2VdO1xuXG5cdGNvbnN0IG1vZGFsQWN0aW9uID0gYWN0aW9uID0+ICgpID0+ICRtb2RhbC5kaWFsb2coYWN0aW9uKTtcblx0Y29uc3QgaXNPcGVuID0gbW9kYWxBY3Rpb24oJ2lzT3BlbicpO1xuXHRjb25zdCBvcGVuID0gbW9kYWxBY3Rpb24oJ29wZW4nKTtcblx0Y29uc3QgY2xvc2UgPSBtb2RhbEFjdGlvbignY2xvc2UnKTtcblxuXHRjb25zdCBtYWtlU2x1Z0Zyb21UaXRsZSA9ICh0aXRsZSA9ICcnKSA9PiB7XG5cdFx0cmV0dXJuIHRpdGxlXG5cdFx0XHQudG9Mb3dlckNhc2UoKVxuXHRcdFx0LnJlcGxhY2UoL1xccysvZywgJy0nKVxuXHRcdFx0LnJlcGxhY2UoLy17Mix9L2csICctJylcblx0XHRcdC5yZXBsYWNlKC9bXmEtejAtOS1dLywgJycpXG5cdFx0XHQucmVwbGFjZSgvLSQvLCAnJylcblx0XHRcdC5yZXBsYWNlKC9eLS8sICcnKTtcblx0fTtcblxuXHRjb25zdCBtYWtlU2x1Z0Zyb21TbHVnID0gKHNsdWcgPSAnJykgPT4ge1xuXHRcdHJldHVybiBzbHVnXG5cdFx0XHQudG9Mb3dlckNhc2UoKVxuXHRcdFx0LnJlcGxhY2UoL1xccysvZywgJy0nKVxuXHRcdFx0LnJlcGxhY2UoLy17Mix9L2csICctJylcblx0XHRcdC5yZXBsYWNlKC9bXmEtejAtOS1dLywgJycpXG5cdFx0XHQucmVwbGFjZSgvXi0vLCAnJyk7XG5cdH07XG5cblx0Y29uc3QgYWRkTWVzc2FnZSA9IG1lc3NhZ2UgPT4ge1xuXHRcdGNvbnN0ICRuZXdNZXNzYWdlID0gJChgPHA+JHttZXNzYWdlfTwvcD5gKTtcblx0XHQkbWVzc2FnZXMuYXBwZW5kKCRuZXdNZXNzYWdlKTtcblx0XHRyZXR1cm4gJG5ld01lc3NhZ2U7XG5cdH07XG5cblx0Y29uc3QgYWRkRXhwaXJpbmdNZXNzYWdlID0gKG1lc3NhZ2UsIGR1cmF0aW9uKSA9PiB7XG5cdFx0Y29uc3QgJG5ld01lc3NhZ2UgPSBhZGRNZXNzYWdlKG1lc3NhZ2UpO1xuXHRcdHNldFRpbWVvdXQoKCkgPT4gJG5ld01lc3NhZ2UuZmFkZU91dCgpLCBkdXJhdGlvbik7XG5cdFx0cmV0dXJuICRuZXdNZXNzYWdlO1xuXHR9O1xuXG5cdGNvbnN0IGRpc3BsYXlTaG9ydFVybE1lc3NhZ2UgPSBzaG93ID0+ICRzaG9ydFVybE1lc3NhZ2UudG9nZ2xlKHNob3cpO1xuXG5cdGNvbnN0IHVwZGF0ZVNsdWcgPSAoKSA9PiB7XG5cdFx0Y29uc3QgcGxhY2Vob2xkZXJTbHVnID0gbWFrZVNsdWdGcm9tVGl0bGUoJHRpdGxlLnZhbCgpKTtcblx0XHRjb25zdCBzbHVnID0gbWFrZVNsdWdGcm9tU2x1Zygkc2x1Zy52YWwoKSk7XG5cblx0XHQkc2x1Zy5wcm9wKFxuXHRcdFx0J3BsYWNlaG9sZGVyJyxcblx0XHRcdHBsYWNlaG9sZGVyU2x1Zy5sZW5ndGggPyBwbGFjZWhvbGRlclNsdWcgOiBkZWZhdWx0U2x1Z1BsYWNlaG9sZGVyXG5cdFx0KTtcblx0XHQkc2x1Zy52YWwoc2x1Zyk7XG5cdH07XG5cblx0Y29uc3Qgbm9EZWZhdWx0RXZlbnQgPSBmdW5jID0+IGUgPT4ge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRmdW5jKCk7XG5cdH07XG5cblx0Y29uc3QgaGFyZFVwZGF0ZVNsdWcgPSBub0RlZmF1bHRFdmVudCgoKSA9PlxuXHRcdCRzbHVnLnZhbChtYWtlU2x1Z0Zyb21UaXRsZSgkc2x1Zy52YWwoKSkpXG5cdCk7XG5cblx0Y29uc3QgaGFuZGxlU2hvd1NsdWdNZXNzYWdlID0gbm9EZWZhdWx0RXZlbnQoKCkgPT5cblx0XHRkaXNwbGF5U2hvcnRVcmxNZXNzYWdlKFxuXHRcdFx0JHNsdWcucHJvcCgncGxhY2Vob2xkZXInKS5sZW5ndGggPiAxNiAmJiAhJHNsdWcudmFsKCkubGVuZ3RoXG5cdFx0KVxuXHQpO1xuXG5cdGNvbnN0IHJlc2V0ID0gKCkgPT4ge1xuXHRcdCR0aXRsZS52YWwoJycpO1xuXHRcdCR1cmwudmFsKCcnKTtcblx0XHQkc2x1Zy52YWwoJycpO1xuXHRcdCRzbHVnLnByb3AoJ3BsYWNlaG9sZGVyJywgZGVmYXVsdFNsdWdQbGFjZWhvbGRlcik7XG5cdFx0bWF5YmVVcGRhdGVCdXR0b25zKCk7XG5cdH07XG5cblx0Y29uc3QgdXBkYXRlQnV0dG9ucyA9IChlbmFibGVkID0geWVzKSA9PiB7XG5cdFx0JHB1Ymxpc2gucHJvcCgnZGlzYWJsZWQnLCAhZW5hYmxlZCk7XG5cdFx0JHNhdmVEcmFmdC5wcm9wKCdkaXNhYmxlZCcsICFlbmFibGVkKTtcblx0fTtcblxuXHRjb25zdCBtYXliZVVwZGF0ZUJ1dHRvbnMgPSAoKSA9PlxuXHRcdHVwZGF0ZUJ1dHRvbnMoJHRpdGxlLnZhbCgpLmxlbmd0aCAmJiAkdXJsLnZhbCgpLmxlbmd0aCk7XG5cblx0Y29uc3Qgc3VibWl0ID0gKHsgcHVibGlzaCA9IHllcyB9ID0ge30pID0+IHtcblx0XHRjb25zdCB0aXRsZSA9ICR0aXRsZS52YWwoKTtcblx0XHRjb25zdCB1cmwgPSAkdXJsLnZhbCgpO1xuXHRcdGxldCBzbHVnID0gJHNsdWcudmFsKCkgPyAkc2x1Zy52YWwoKSA6IG1ha2VTbHVnRnJvbVRpdGxlKHRpdGxlKTtcblxuXHRcdCQucG9zdChcblx0XHRcdGFqYXh1cmwsXG5cdFx0XHR7XG5cdFx0XHRcdGFjdGlvbjogJ3BsdF9xdWlja19hZGQnLFxuXHRcdFx0XHRwbHRfdGl0bGU6IHRpdGxlLFxuXHRcdFx0XHRwbHRfdXJsOiB1cmwsXG5cdFx0XHRcdHBsdF9zbHVnOiBzbHVnLFxuXHRcdFx0XHRwbHRfcHVibGlzaDogcHVibGlzaCA/IDEgOiAwLFxuXHRcdFx0XHRwbHRfbm9uY2U6IG5vbmNlLFxuXHRcdFx0fSxcblx0XHRcdHJlc3BvbnNlID0+IHtcblx0XHRcdFx0Y29uc3QgeyBtZXNzYWdlIH0gPSByZXNwb25zZS5kYXRhO1xuXHRcdFx0XHRjb25zdCBkZWxheSA9IDUwMDA7XG5cdFx0XHRcdHJlc2V0KCk7XG5cdFx0XHRcdCR0aXRsZS5mb2N1cygpO1xuXHRcdFx0XHRhZGRFeHBpcmluZ01lc3NhZ2UobWVzc2FnZSwgZGVsYXkpO1xuXHRcdFx0fVxuXHRcdCk7XG5cdH07XG5cblx0Y29uc3QgY2xpY2tNZW51SXRlbSA9IG5vRGVmYXVsdEV2ZW50KCgpID0+IChpc09wZW4oKSA/IGNsb3NlKCkgOiBvcGVuKCkpKTtcblx0Y29uc3Qgc2F2ZURyYWZ0ID0gbm9EZWZhdWx0RXZlbnQoKCkgPT4gc3VibWl0KHsgcHVibGlzaDogbm8gfSkpO1xuXHRjb25zdCBwdWJsaXNoID0gbm9EZWZhdWx0RXZlbnQoKCkgPT4gc3VibWl0KHsgcHVibGlzaDogeWVzIH0pKTtcblxuXHQkbW9kYWwuZGlhbG9nKHtcblx0XHR0aXRsZTogJ0FkZCBQYWdlIExpbmsnLFxuXHRcdGRpYWxvZ0NsYXNzOiAnd3AtZGlhbG9nIHBsdC11aS1kaWFsb2cnLFxuXHRcdGF1dG9PcGVuOiBubyxcblx0XHRkcmFnZ2FibGU6IG5vLFxuXHRcdHdpZHRoOiAnYXV0bycsXG5cdFx0bW9kYWw6IHllcyxcblx0XHRyZXNpemFibGU6IG5vLFxuXHRcdGNsb3NlT25Fc2NhcGU6IHllcyxcblx0XHRwb3NpdGlvbjoge1xuXHRcdFx0bXk6ICdjZW50ZXInLFxuXHRcdFx0YXQ6ICdjZW50ZXInLFxuXHRcdFx0b2Y6IHdpbmRvdyxcblx0XHR9LFxuXHRcdG9wZW46ICgpID0+ICQoJy51aS13aWRnZXQtb3ZlcmxheScpLmJpbmQoJ2NsaWNrJywgY2xvc2UpLFxuXHRcdGNyZWF0ZTogKCkgPT4ge1xuXHRcdFx0JCgnLnBsdC11aS1kaWFsb2cgLnVpLWRpYWxvZy10aXRsZWJhci1jbG9zZScpLmFkZENsYXNzKCd1aS1idXR0b24nKTtcblx0XHRcdCQoJy5wbHQtdWktZGlhbG9nJykuY3NzKHsgcG9zaXRpb246ICdmaXhlZCcgfSk7XG5cdFx0fSxcblx0fSk7XG5cblx0Y29uc3QgcmVwb3NpdGlvbk1vZGFsID0gKCkgPT4ge1xuXHRcdGlmICghaXNPcGVuKCkpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQkbW9kYWwuZGlhbG9nKCdvcHRpb24nLCAncG9zaXRpb24nLCB7XG5cdFx0XHRteTogJ2NlbnRlcicsXG5cdFx0XHRhdDogJ2NlbnRlcicsXG5cdFx0XHRvZjogd2luZG93LFxuXHRcdH0pO1xuXHR9O1xuXG5cdCQod2luZG93KVxuXHRcdC5zY3JvbGwocmVwb3NpdGlvbk1vZGFsKVxuXHRcdC5yZXNpemUocmVwb3NpdGlvbk1vZGFsKTtcblxuXHQvLyBFdmVudHMuXG5cdGlmIChmYW5jeVVybHMpIHtcblx0XHQkdGl0bGUua2V5dXAodXBkYXRlU2x1Zyk7XG5cdFx0JHRpdGxlLmtleXVwKGhhbmRsZVNob3dTbHVnTWVzc2FnZSk7XG5cdFx0JHNsdWcua2V5dXAodXBkYXRlU2x1Zyk7XG5cdFx0JHNsdWcua2V5dXAoaGFuZGxlU2hvd1NsdWdNZXNzYWdlKTtcblx0XHQkZm9ybS5jaGFuZ2UoaGFyZFVwZGF0ZVNsdWcpO1xuXHR9XG5cblx0JG1lbnVJdGVtLmNsaWNrKGNsaWNrTWVudUl0ZW0pO1xuXHQkc2F2ZURyYWZ0LmNsaWNrKHNhdmVEcmFmdCk7XG5cdCRwdWJsaXNoLmNsaWNrKHB1Ymxpc2gpO1xuXHQkZm9ybS5zdWJtaXQocHVibGlzaCk7XG5cdCR0aXRsZS5rZXl1cChtYXliZVVwZGF0ZUJ1dHRvbnMpO1xuXHQkdXJsLmtleXVwKG1heWJlVXBkYXRlQnV0dG9ucyk7XG5cdCRmb3JtLmNoYW5nZShtYXliZVVwZGF0ZUJ1dHRvbnMpO1xuXG5cdC8vIEluaXQuXG5cdHJlc2V0KCk7XG59KTtcbiJdfQ==
